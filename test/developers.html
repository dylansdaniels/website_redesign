<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HNN Textbook</title>
    <!-- <base href="/website_redesign/"> -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="homepage_styles.css">
    
</head>
<body>

<div id="main">
    <div class="topbar">
        <div id="topbar-wrapper">
            <div class="links">
                <a href="https://jonescompneurolab.github.io/hnn-core/stable/index.html#Installation">Install</a>
                <a href="https://dylansdaniels.github.io/website_redesign/content/01_under_the_hood/primary_electric_currents.html">Tutorials</a>
                <a href="https://jonescompneurolab.github.io/hnn-core/stable/index.html">Documentation</a>
                <a href="">Help</a>
            </div>

            <!-- Right side of topbar-->
            <div class="topbar-right">
                <div class="dropdown">
                    <button id="dropdownButton" class="dropdown-button">
                        <span class="dropdown-text">
                            <span>More</span>
                            <span class="caret"></span>
                        </span>
                    </button>
                    <div class="dropdown-content">
                        <a href="">Developers</a>
                        <a href="">Publications</a>
                        <a href="https://github.com/jonescompneurolab/hnn-core/discussions/categories/announcements">Announcements</a>
                        <a href="">Contact Us</a>
                    </div>
                </div>
                <div class="social-icons">
                    <a href="https://github.com/jonescompneurolab/hnn-core" target="_blank" aria-label="GitHub">
                        <img src="icons/github.png" alt="GitHub">
                    </a>
                    <a href="https://bsky.app/profile/hnnsolver.bsky.social" target="_blank" aria-label="BlueSky">
                        <img src="icons/bluesky.png" alt="BlueSky">
                    </a>
                    <a href="https://www.linkedin.com/company/human-neocortical-neurosolver/" target="_blank" aria-label="LinkedIn">
                        <img src="icons/linkedin.png" alt="LinkedIn">
                    </a>
                </div>
            </div>


        </div>
    </div>

    <div id="content-wrapper">
        <div id="content">
            <!--
            # Title: Homepage
            # Updated: 2024-01-14
            #
            # Contributors:
                # Dylan Daniels
            -->
            <br>
            <div id="logo-wrapper">
                <img src="https://hnn.brown.edu/wp-content/uploads/hnn-medium.png"></img>
                <p>
                    <span style="color: var(--hnn-blue)">HUMAN </span>
                    <span style="color: var(--hnn-purple)">NEOCORTICAL </span>
                    <span style="color: var(--hnn-violet)">NEUROSOLVER</span>
                </p>
            </div>

            <div id="logo-subtitle">
                <p>
                    Developers...
                </p>
            </div>
            <div class="developers-table">
                <div class="profile-grid" id="profiles">
                    <!-- Pictures will be added here dynamically -->
                </div>
            </div>

        </div> <!-- close content -->
    </div> <!-- close content wrapper -->
</div> <!-- close main -->

<script>
    let isSidebarOpen = true; // Sidebar is initially open

    function toggleNav() {
        const sidebar = document.getElementById("mySidebar");
        const main = document.getElementById("main");

        // Toggle sidebar state
        if (isSidebarOpen) {
            sidebar.style.width = "0";
            main.style.marginLeft = "0";
        } else {
            sidebar.style.width = "350px";  // Adjust width as needed
            main.style.marginLeft = "350px";  // Match margin to new width
        }

        // Toggle the sidebar state
        isSidebarOpen = !isSidebarOpen;
    }

    // Open the sidebar on page load
    window.onload = function() {
        // Set initial styles for open state without animation
        const sidebar = document.getElementById("mySidebar");
        const main = document.getElementById("main");

        sidebar.style.transition = "none";
        main.style.transition = "none";
        sidebar.style.width = "350px";
        main.style.marginLeft = "350px";

        // Re-enable transition for subsequent toggles
        setTimeout(() => {
            sidebar.style.transition = "width 0.5s";
            main.style.transition = "margin-left 0.5s";
        }, 10);
    }

    function increaseFontSize() {
        event.stopPropagation();  // Prevent dropdown from closing
        const content = document.getElementById("content");
        const currentSize = window.getComputedStyle(content).fontSize;
        content.style.fontSize = (parseFloat(currentSize) + 2) + "px";
    }

    function decreaseFontSize() {
        event.stopPropagation();  // Prevent dropdown from closing
        const content = document.getElementById("content");
        const currentSize = window.getComputedStyle(content).fontSize;
        content.style.fontSize = (parseFloat(currentSize) - 2) + "px";
    }

    // Dropdown for font buttons
    function toggleDropdown() {
        const dropdownContent = document.querySelector('.dropdown-content');
        dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
    }

    // Open/close dropdown on click of the button
    document.getElementById('dropdownButton').onclick = function(event) {
        event.stopPropagation();  // Prevent the click from triggering the window.onclick event
        toggleDropdown();
    };

    // Close dropdown if clicking outside
    window.onclick = function(event) {
        const dropdownContent = document.querySelector('.dropdown-content');
        if (!event.target.closest('.dropdown')) {  // Close if click outside the dropdown
            dropdownContent.style.display = 'none';
        }
    };

    function toggleSubmenu(event) {
        const header = event.target.closest('#sidebar-header'); // Get the clicked header
        const submenu = header.nextElementSibling; // Get the submenu
        const toggleIcon = header.querySelector('.toggle-icon'); // Get the icon

        if (submenu && submenu.classList.contains('submenu')) {
            submenu.classList.toggle('open'); // Toggle the 'open' class to control visibility
            toggleIcon.textContent = submenu.classList.contains('open') ? '-' : '+'; // Update icon
        }
    }

    // This function will add the full text to the title attribute for all anchor tags
    document.querySelectorAll('.sidebar a').forEach(anchor => {
        anchor.setAttribute('title', anchor.textContent);
    });

    // This function will update the sidebar links when a page is loaded
    // locally so that sidebar naivagation remains functional without the
    // need for a server
    // Note: This should work for Mac/Linux but may not on Windows
    document.addEventListener("DOMContentLoaded", function() {
        if (window.location.protocol === "file:") {
            // get the current local directory path
            const currentDir = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));

            // get 'absolute' links with root of 'website_redesign'
            const links = document.querySelectorAll("#mySidebar a");
            links.forEach(link => {
                const href = link.getAttribute("href");

                if (href && href.startsWith("/")) {
                    // extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // prepend root path to link
                    const resolvedHref = "file://" + rootPath + href;
                    link.setAttribute("href", resolvedHref);
                }
            });
        }
    });

    // ------------------- //
    // --- Card Popups --- //
    // ------------------- //
    const cards = document.querySelectorAll('.card');
    const popups = document.querySelectorAll('.popup-container');

    // Show popup on card click
    cards.forEach(card => {
        card.addEventListener('click', () => {
            const popupId = card.getAttribute('data-popup');
            const popup = document.getElementById(popupId);
            if (popup) {
                popup.classList.add('show'); // add 'show' class to display the popup
                document.body.style.overflow = 'hidden'; // disable body scrolling

                // Reset scroll position when the popup is opened
                const popupBox = popup.querySelector('.popup-box');
                if (popupBox) {
                    popupBox.scrollTop = 0; // Set scroll position to the top
                }
            }
        });
    });

    // Close popup on close button click
    document.querySelectorAll('.popup-close').forEach(button => {
        button.addEventListener('click', () => {
            const popupContainer = button.closest('.popup-container');
            if (popupContainer) {
                popupContainer.classList.remove('show'); // Remove 'show' class to hide the popup
                document.body.style.overflow = ''; // Re-enable body scrolling
            }
        });
    });

    // Close popup on outside click
    popups.forEach(popup => {
        popup.addEventListener('click', (e) => {
            if (e.target === popup) { // Check if the click is outside the popup content
                popup.classList.remove('show'); // Remove 'show' class to hide the popup
                document.body.style.overflow = ''; // Re-enable body scrolling
            }
        });
    });

    // --------------------
    // Dynamic Developers Table
    // --------------------
    async function fetchGitHubProfile(username) {
            const response = await fetch(`https://api.github.com/users/${username}`);
            if (!response.ok) {
                console.error(`Failed to fetch profile for ${username}`);
                return null;
            }
            return await response.json();
        }

        async function populateProfilePictures() {
            const usernames = [
                'stephanie-r-jones', 'jasmainak', 'ntolley',  'dylansdaniels',
                'asoplata', 'rythorpe', 'samnemo', 'blakecaldwell', 
                'ramcdougal', 'cjayb', 'gtdang', 'kmilo9999', 'chenghuzi', 
                'carolinafernandezp', 'katduecker'
            ]; 
            const profiles = await Promise.all(usernames.map(fetchGitHubProfile));

            const profilesGrid = document.getElementById('profiles');
            profiles.forEach(profile => {
                if (profile) {
                    const profileDiv = document.createElement('div');
                    profileDiv.className = 'profile';

                    // Create link
                    const link = document.createElement('a');
                    link.href = profile.html_url;
                    link.target = '_blank'; // Open in a new tab

                    // Add profile picture
                    const img = document.createElement('img');
                    img.src = profile.avatar_url;
                    img.alt = `${profile.login}'s avatar`;

                    // Append image to link, and link to profileDiv
                    link.appendChild(img);
                    profileDiv.appendChild(link);

                    // Append profileDiv to the grid
                    profilesGrid.appendChild(profileDiv);
                }
            });
        }

        // Populate the pictures grid
        populateProfilePictures();

</script>

</body>
</html>