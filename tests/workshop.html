<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HNN Textbook</title>
    <!-- <base href="/website_redesign/"> -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../content/assets/styles.css">
</head>
<body>

	<div id="mySidebar" class="sidebar">
		<div class="navbar-header">
		<a>
			Human Neocortical Neurosolver
		</a>
		<br>
			<svg class="collapse-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
				<path d="M9 9H4v1h5V9z"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2V3zm1 2h4l1 1v4h2V3H6v2zm4 1H3v7h7V6z"/>
			</svg>
		</div>
		<a href="/website_redesign/content/preface.html">Preface</a>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				1. Getting Started
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/01_getting_started/challenge.html">1.1 Introducing HNN</a>
				<a href="/website_redesign/content/01_getting_started/template_model.html">1.2 Template Model</a>
				<a href="/website_redesign/content/01_getting_started/installation.html">1.3 Installation</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				2. Model Assumptions
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/03_model_assumptions/cortical_column_structure.html">2.1 Cortical Column Structure</a>
				<a href="/website_redesign/content/03_model_assumptions/primary_electric_currents.html">2.2 Primary Electrical Currents</a>
				<a href="/website_redesign/content/03_model_assumptions/neurons_morphology_and_physiology.html">2.3 Neurons: Morphology and Physiology</a>
				<a href="/website_redesign/content/03_model_assumptions/synaptic_connectivity.html">2.4 Synaptic Connectivity</a>
				<a href="/website_redesign/content/03_model_assumptions/evoked_and_rhythmic_driving_inputs.html">2.5 Evoked and Rhythmic Driving Inputs</a>
				<a href="/website_redesign/content/03_model_assumptions/tonic_and_noisy_driving_inputs.html">2.6 Tonic and Noisy Driving Inputs</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				3. Simulating ERPs
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/05_erps/erps_in_gui.html">3.1 GUI Tutorial of ERPs Simulation</a>
				<a href="/website_redesign/content/05_erps/hnn_core.html">3.2 API Tutorial of ERPs Simulation</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				4. Simulating Alpha/Beta Rhythms
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/06_alpha_beta/gui.html">4.1 GUI Tutorial of Alpha/Beta Rhythms</a>
				<a href="/website_redesign/content/06_alpha_beta/api.html">4.2 API Tutorial of Alpha/Beta Rhythms</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				5. Simulating Gamma Rhythms
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/07_gamma/gamma_in_gui.html">5.1 GUI Tutorial of Gamma Rhythms</a>
				<a href="/website_redesign/content/07_gamma/gamma_in_api.html">5.2 API Tutorial of Gamma Rhythms</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				6. From Data to Simulation
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/08_data_to_simulation/from_meg_to_hnn.html">6.1 From MEG sensor-space data to HNN simulation</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				7. Feature Demos
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/09_feature_demos/plot_firing_pattern.html">7.1 Plot Firing Pattern</a>
				<a href="/website_redesign/content/09_feature_demos/record_and_plot_extracellular_potentials.html">7.2 Record & Plot Extracellular Potentials</a>
				<a href="/website_redesign/content/09_feature_demos/modifying_local_connectivity.html">7.3 Modifying Local Connectivity</a>
				<a href="/website_redesign/content/09_feature_demos/animating_hnn_simulations.html">7.4 Animating HNN Simulations</a>
				<a href="/website_redesign/content/09_feature_demos/batch_simulation.html">7.5 Batch Simulation</a>
				<a href="/website_redesign/content/09_feature_demos/simulate_beta_modulated_erp.html">7.6 Simulate Beta-modulated ERP</a>
				<a href="/website_redesign/content/09_feature_demos/use_mpi_backend_for_parallelization.html">7.7 Use MPI Backend for Parallelization</a>
				<a href="/website_redesign/content/09_feature_demos/optimize_simulated_evoked_response_parameters.html">7.8 Optimize simulated evoked response parameters</a>
				<a href="/website_redesign/content/09_feature_demos/optimize_simulated_rhythmic_response_parameters.html">7.9 Optimize simulated rhythmic response parameters</a>
			</div>
		</div>
	<div style='height: 30px;'></div>
	</div>

<div id="main">
    <div class="topbar">

        <!-- Topbar menu -->
        <div class="menu-container">
            <div class="menu-icons">
                <button class="openbtn" onclick="toggleNav()">
                    ☰
                </button>
                <a href="" class="home-link">
                    <div class="home-icon-container">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24" 
                            height="24"
                            viewBox="0 0 24 24" 
                            class="home-icon">
                            <path
                                d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                            />
                        </svg>
                    </div>
                </a>
                <button class="theme-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
                    </svg>
                </button>
                <div class="dropdown">
                    <button 
                        id="dropdownButton" 
                        class="dropdown-button">
                            <img
                                src="/website_redesign/content/assets/icons/fontsize.png"
                                alt="fontsize"
                            />
                    </button>
                    <div class="dropdown-content">
                        <button 
                            class="fontsize-btn" 
                            onclick="decreaseFontSize()">
                            <img
                                src="/website_redesign/content/assets/icons/fontminus.png"
                                alt="fontminus"
                            />
                        </button>
                        <button 
                            class="fontsize-btn" 
                            onclick="increaseFontSize()">
                            <img
                                src="/website_redesign/content/assets/icons/fontplus.png"
                                alt="fontplus"
                            />
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Topbar image -->
        <div class="topbar-logo-container">
            <img 
                id="topbar-logo"
                src="https://hnn.brown.edu/wp-content/uploads/hnn-medium.png"
            />
        </div>

        <!-- Right side of topbar -->
        <div class="socials-container">
            <div class="social-icons">
                <a 
                    href="https://github.com/jonescompneurolab/hnn-core" 
                    target="_blank" 
                    aria-label="GitHub">
                    <img 
                        src="/website_redesign/content/assets/icons/github.png"
                        alt="GitHub">
                </a>
                <a 
                    href="https://bsky.app/profile/hnnsolver.bsky.social" 
                    target="_blank"
                    aria-label="BlueSky">
                    <img 
                        src="/website_redesign/content/assets/icons/bluesky.png"
                        alt="BlueSky">
                </a>
                <a 
                    href="https://www.linkedin.com/company/human-neocortical-neurosolver/" 
                    target="_blank"
                    aria-label="LinkedIn">
                    <img 
                        src="/website_redesign/content/assets/icons/linkedin.png"
                        alt="LinkedIn">
                </a>
            </div>
        </div>
    </div>

    <div id="content-wrapper">
    <div id="content">

        <!--
        # Title: Workshop Instructions
        # Updated: 2025-03-18
        #
        # Contributors:
            # Dylan Daniels
        -->
            
        <h1>
            Online HNN Workshop, Spring 2025
        </h1>
        <p>
            Welcome to our Online HNN Workshop for spring 2025. In this interactive workshop, we will explore [blurb text here].
        </p>
        <h3>
            Table of contents
        </h3>
        <ul>
            <li>
                <a href="file:///Users/dylandaniels/Repos/website_redesign/tests/workshop.html#workshop-schedule">
                    Workshop Schedule
                </a>
            </li>
            <li>
                <a href="file:///Users/dylandaniels/Repos/website_redesign/tests/workshop.html#installing-and-running-hnn">
                    Installing and Running HNN
                </a>
            </li>
            <li>
                <a href="file:///Users/dylandaniels/Repos/website_redesign/tests/workshop.html#downloading-workshop-materials">
                    Downloading Workshop Materials
                </a>
            </li>
            <li>
                <a href="file:///Users/dylandaniels/Repos/website_redesign/tests/workshop.html#erp-tutorial-with-hnn-gui">ERP Tutorial with HNN GUI</a>
            </li>
        </ul>
        <h3>
            Workshop Schedule
        </h3>
        <h3>
            Installing and Running HNN
        </h3>
        <p>
            We recommend that you run the HNN GUI through Google CoLab for this workshop. You can access our CoLab notebook for running HNN GUI by clicking <a href="https://colab.research.google.com/drive/1yyjuEBimIu_f7_0Nf3YLwUiVOO7ZrKK3?usp=sharing">here</a>.
        </p>
        <p>
            This is the quickest way to get up and running with HNN, though it does require a Google account. If you do not have a Google account, you can create one for free to run the notebooks. Note that there is no charge associated with using Google CoLab.
        </p>
        <p>
            Alternatively, if you would like to install the HNN GUI locally, please see the <a href="">Installation Page</a> of our HNN documentation.
        </p>

        <h3>
            Downloading Workshop Materials
        </h3>
        <p>
            To follow along with the interactive portions of the workshop, you will need to download the workshop materials available in the <code>workshop materials</code> folder of our <a href="https://github.com/jonescompneurolab/hnn-data">hnn-data</a> GitHub repository. You can click <a href="">here</a> to download the folder directly.
        </p>
        <p>
            Additionally, we will refer to the schematic below throughout the workshop, and we include it here for your reference.
        </p>
        <img src="https://dylansdaniels.github.io/hnn-tutorials/workshop-instructions/imgs/full_schematic.png" alt="full schematic" style="width: 100%; max-width: 800px; margin: 0 auto; display: block;">
        <h2>
            ERP Tutorial with HNN GUI
        </h2>
        <p>
            In this tutorial, we will [insert blurb]
        </p>
        <p>
            For each exercise in the GUI walkthrough, we will provide a set of steps you can follow to reach the intended 'starting point' for completing the exercise. (The 'starting point' is the assumed state of the GUI <i>before</i> you begin the exercise.)
        </p>
        <h4>
            Interactive Exercise 1
        </h4>
        <p>
            In this exercise, we will adjust the <code>Smooth Window</code> and the <code>Dipole Scaling</code> of the simulated waveform to see if we can get a better match to the experimental data we loaded into HNN. 
        </p>
        <p>
            Remember that "scaling" in this case refers to a scaling factor applied to our simulated waveform. You can think of the scaling factor as a measure of the number of cells contributing to the simulated signal. "Smoothing" is also related to the number of cells contributing to the signal, and can be thought of as the effect of averaging across a large population of cells.
        </p>
        <h5>
            Starting Point
        </h5>
        <ul>
        <li>
            Refresh the HNN GUI to return to the default state.
        </li>
        <li>
            Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
        </li>
        <li>
            Click <code>Run</code> to run the "default" simulation
        </li>
        <li>
            Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
        </li>
        <li>
            Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
        </li>
        <li>
            Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
        </li>
        <li>
            Click the <code>Add plot</code> button
        </li>
        </ul>
        <h5>
            Exercise 1.1
        </h5>
        <p>
            Adjust the <code>Dipole Smooth Window (ms)</code> in the "ax1" tab of "Figure 2". Try the following values: 
            <code> 0, 15, 60, and 90 </code>
        </p>
        <p>
            <b>Discussion Question:</b>
            <ul>
                <li>
                    What is the effect of increasing the smoothing window on the waveform shape?
                </li>
                <li>
                    How do you determine the "right" level of smoothing? 
                </li>
            </ul>
        </p>
        <h5>
            Exercise 1.2
        </h5>
        <p>
            Reset the <code>Dipole Smooth Window (ms)</code> to its default value of <code>30</code>. Adjust the <code>Simulation Dipole Scaling</code> in the "ax1" tab of "Figure 2". Try the following values: 
            <code> 1500, 5000, 7500, 10000 </code>.
            Be sure to click "Clear axis" and then "Add plot" after each adjustment to get the updated RMSE.
        </p>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    How does changing the scaling factor affect the waveform shape?
                </li>
                <li>
                    Why might you choose one scaling value over another?
                </li>
            </ul>
        </p>
        <h4>
            Interactive Exercise 2
        </h4>
        <p>
            In this exercise, we will focus on hand tuning the parameters for the first proximal drive only. The goal is to improve the fit of the simulated waveform to the experimental data, focusing solely on the first peak (referred to as the "M25" peak in our published work). 
        </p>
        <h5>
            Starting Point
        </h5>
        <ul>
            <li>
                Refresh the HNN GUI to return to the default state.
            </li>
            <li>
                Change the value of the 'Name' field to something informative, such as "SupraT_Prox1"
            </li>
            <li>
                Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
            </li>
            <li>
                Select the <code>External Drives</code> tab.
            </li>
            <li>
                Click the <code>Load external drives</code> button. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_Prox1.json" parameter file.
            </li>
            <li>
                Click <code>Run</code> to run the simulation
            </li>
            <li>
                Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
            </li>
            <li>
                Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
            </li>
            <li>
                Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
            </li>
            <li>
                Click the <code>Add plot</code> button
            </li>
        </ul>
        <h5>
            Exercise 2.1
        </h5>
        <p>
            From the <code>External Drives</code> tab, adjust the values of the Layer 2/3 (L2) and Layer 5 (L5) pyramidal cell AMPA weights for the first proximal drive (labelled "evprox1"). Try the following combinations: 
            <ul>
                <li>
                    <code>L5: 0.96, L2: 4.206</code>
                </li>
                <li>
                    <code>L5: 0.24, L2: 1.0515</code></li>
                <li>
                    <code>L5: 0.048, L2: 0.2103</code>
                </li>
            </ul>
        </p>
        <div class="callout">
            <table class="callout-table">
                <tbody>
                    <tr>
                        <td class="emoji-cell">
                        ❗
                        </td>
                        <td class="text-cell">
                            Note that when updating a simulation parameter (as opposed to a visualization parameter), you'll need to re-run the simulation under a new name. To do so, return to the <code>Simulation</code> tab, change the simulation name, and then click the <code>Run</code> button.
                        </td>
                        <td class="emoji-cell"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p>
            Once you've run all of the simulations, create a new Figure that displays all of the simulated dipoles as well as the experimental data on the same graph.
        </p>
        <p>    
            You can do this by selecting any previously-generated figure and adding your new simulations to the dipole plot. For example, if you're working from the 'Starting Point' outlined above, you can add your new simulations to 'ax1' of 'Figure 2' by selecting your new simulation from the 'Simulation Data' dropdown and clicking the <code>Add plot</code> button. Be sure that 'Data to compare' is set to 'None', otherwise you will be plotting the experimental data multiple times.
        </p>
        <p>
            <b>Discussion Question:</b>
            <ul>
                <li>
                    How do the AMPA weights relate to current flow in our simulation? Refer to the image above for a visual representation of the network and drives.
                </li>
                <li>
                    Which simulation yields the best fit to the "M25" peak of the experimental data? Which simulation has the lowest RMSE? How does the fit relate to the RMSE in this case?
                </li>
            </ul>
        </p>
        <h5>
            Exercise 2.2
        </h5>
        <p>
            From the <code>External Drives</code> tab, set the AMPA weights to the values from Exercise 2.1 that produced the best fit to the "M25" peak.
        </p>
        <p>
            Next, try setting the Layer 2/3 basket cell (listed as 'L2_basket') AMPA and NMDA weights to <code>0</code>.
        </p>
        <p>
            Once you've run the above simulation, compare the spiking plots and the layer-specific dipoles for the new simulation with the best simulation for Exercise 2.1.
        </p>
        <p>
            To create these visualizations, select either "Dipole Layers (3x1)" or "Dipole Spikes (2x1)" from the "Layout template" dropdown menu in the <code>Visualization</code> tab. Doing so will trigger the "Dataset" dropdown box to appear below the "Layout template" dropdown. From the "Dataset" dropdown box, select your simulation and then click <code>Make figure</code>. 
        </p>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    What happens to the Layer 2/3 and Layer 5 dipoles when you set the Layer 2/3 basket AMPA/NMDA weights to <code>0</code>?
                </li>
                <li>
                    How might differences in the spiking related to the observed differences in the dipole across these simulations? You may want to refer to the schematic above. 
                </li>
            </ul>
        </p>
        <h4>
            Interactive Exercise 3
        </h4>
        <p>
            In this exercise, we will hand tune the parameters for the second proximal drive. The goal is to improve the fit of the simulated waveform to the experimental data, focusing on the trough at ~ 70ms ("M70").
        </p>
        <h5>
            Starting Point
        </h5>
        <ul>
            <li>
                Refresh the HNN GUI to return to the default state.
            </li>
            <li>
                Change the value of the 'Name' field to something informative, such as "SupraT_Prox1_Dist1"
            </li>
            <li>
                Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
            </li>
            <li>
                Select the <code>External Drives</code> tab.
            </li>
            <li>
                Click the <code>Load external drives</code> button. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_Prox1_Dist1.json" parameter file.
            </li>
            <li>
                Click <code>Run</code> to run the simulation
            </li>
            <li>
                Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
            </li>
            <li>
                Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
            </li>
            <li>
                Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
            </li>
            <li>
                Click the <code>Add plot</code> button
            </li>
        </ul>
        <h5>
            Exercise 3.1
        </h5>
        <p>
            From the <code>External Drives</code> tab, adjust the value of the Standard Deviation about the mean arrival time (labelled "Std dev time") for the first distal drive (labelled "evdist1"). Try the following values: <code>13.81, 3.81</code>
        </p>
        <p>
            Compare the layer-specific dipole plots and the spiking plots for each simulation.
        </p>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    How does increasing / decreasing the standard deviation of the distal drive's arrival time affect the amplitude of the "M70" trough"?
                </li>
                <li>
                    What differences do you observe in the spike plots for the different simulations? How do the differences in the spike plots relate to the differences observed in the layer-specific dipoles?
                </li>
            </ul>
        </p>
        <h4>
            Interactive Exercise 4
        </h4>
        <p>
            In this exercise, we will .
        </p>
        <h5>
            Starting Point
        </h5>
        <ul>
            <li>
                Refresh the HNN GUI to return to the default state.
            </li>
            <li>
                Change the value of the 'Name' field to something informative, such as "SupraT_AllDrives"
            </li>
            <li>
                Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
            </li>
            <li>
                Select the <code>External Drives</code> tab.
            </li>
            <li>
                Click the <code>Load external drives</code> button. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_Prox1_Dist1_Prox2.json" parameter file.
            </li>
            <li>
                Click <code>Run</code> to run the simulation
            </li>
            <li>
                Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
            </li>
            <li>
                Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
            </li>
            <li>
                Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
            </li>
            <li>
                Click the <code>Add plot</code> button
            </li>
        </ul>
        <h5>
            Exercise 4.1
        </h5>
        <p>
            From the <code>External Drives</code> tab, adjust the value of the mean arrival time (labelled "Mean time") for the second proximal drive (labelled "evprox2"). Try the following values: <code>110.53, 90.53</code>
        </p>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    How does changing the mean arrival time of the second proximal drive affect the amplitude of the "M135" peak? Explain your reasoning.
                </li>
                <li>
                    
                </li>
            </ul>
            <h5>
                Exercise 4.2
            </h5>
            <p>
                From the <code>External Drives</code> tab, adjust the value of the mean arrival time (labelled "Mean time") for the second proximal drive (labelled "evprox2"). Try the following values: <code>105, 95</code>
            </p>
            <p>
                <b>Discussion Questions:</b> 
                <ul>
                    <li>
                        How does changing the mean arrival time of the second proximal drive affect the amplitude of the "M135" peak? Explain your reasoning.
                    </li>
                    <li>
                        Which simulation has the lowest RMSE, and which has the best fit to the experimental data? Are they the same? Explain your reasoning.
                    </li>
                </ul>
        </p>
        <h4>
            Interactive Exercise 5
        </h4>
        <p>
            Now that you have simulated all three drives, you may notice that there are still some discrepancies between the simulated data and the experimental data. What additional paramaters might you adjust to continue to improve the fit? Try to adjust the timing and strength of any of the external drives and see if you can get a RMSE value less than 18.5.
        </p>
        <p>
            Note that some features of the waveform will be difficult to capture when we're only simulating one trial due to the lack of stochasticity. In practice, we would simulate a large number of trials and tune to the average waveform. However, there is still room for improvement even when simulating only one trial.
        </p>
        <b>Discussion Questions:</b> 
        <ul>
            <li>
                Which parameters did you change and why?
            </li>
            <li>
                Did your parameter changes always yield the results you expected? If not, can you explain the discrepancies? (Hint: try looking at the spiking plots and the layer-specific dipoles in conjunction with the schematic figure above.)
            </li>
        </ul>
        <p>
            Once you've run some simulations and answered the above questions, you can load our "solution" from the <code>External Drives</code> tab by clicking the <code>Load external drives</code> button and selecting the "ERPSupraT_hand-tuned.json" file from the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder. Note that our "solution" is merely one possible answer among many, and so don't feel constrained by the solution we provide.
        </p>


    <br><br>
    </div> <!-- close content -->
    </div> <!-- close content wrapper -->
</div> <!-- close main -->
<script>
    // ----------------------------------------
    // Manage footer
    // ----------------------------------------
    // This function will update the footer links when a page is loaded
    // locally so that naivagation remains functional without a server
    // Note: this solution is specific to MacOS
    document.addEventListener("DOMContentLoaded", function() {
        if (window.location.protocol === "file:") {
            // Get the current local directory path
            const currentDir = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));

            // Process both previous and next links
            document.querySelectorAll('.previous-area, .next-area').forEach(function(area) {
                const link = area.getAttribute('data-link');
                
                if (link && link.startsWith("/")) {
                    // Extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // Prepend root path to link
                    const resolvedLink = "file://" + rootPath + link;
                    area.setAttribute("data-link", resolvedLink);
                }
            });
        }
    });
    // Hide the area if data-link is 'None'
    document.querySelectorAll('.previous-area, .next-area').forEach(function(area) {
        if (area.getAttribute('data-link') === 'None') {
            area.style.display = 'none'; 
        }
    });

    // Redirect to the specified link
    document.querySelectorAll('.previous-area, .next-area').forEach(function(area) {
        area.addEventListener('click', function() {
            window.location.href = area.getAttribute('data-link');
        });
    });

    // ----------------------------------------
    // Manage sidebar
    // ----------------------------------------
    let isSidebarOpen = true; // Sidebar is initially open
    let isSidebarFullyOpen = true; // Sidebar is fully open
    const maxWidth = '350px';

    function toggleNav() {
        const sidebar = document.getElementById("mySidebar");
        const main = document.getElementById("main");

        // Toggle sidebar state
        if (isSidebarOpen) {
            sidebar.style.width = "0";
            main.style.marginLeft = "0";
            isSidebarFullyOpen = false;
        } else {
            sidebar.style.width = maxWidth;
            main.style.marginLeft = maxWidth;  // Match margin to new width
        }

        // Toggle the sidebar state
        isSidebarOpen = !isSidebarOpen;

        // Store the sidebar state in localStorage
        localStorage.setItem("sidebarState", isSidebarOpen ? "open" : "closed");
    }

    // Always listen for the transitionend on the sidebar
    const sidebar = document.getElementById("mySidebar");
    sidebar.addEventListener('transitionend', function() {
        if (sidebar.style.width === maxWidth) {
            // Sidebar has fully opened
            isSidebarFullyOpen = true;
        } else {
            // Sidebar is not fully open
            isSidebarFullyOpen = false;
        }
    });

    // Open the sidebar on page load
    // -----------------------------
    
    // Apply sidebar state before the page renders to avoid flicker
    const savedState = localStorage.getItem("sidebarState");
    if (savedState === "closed") {
        document.body.classList.add("sidebar-closed");
    } else {
        document.body.classList.add("sidebar-open");
    }

    window.onload = function() {
        const sidebar = document.getElementById("mySidebar");
        const main = document.getElementById("main");

        // Retrieve stored state
        const savedState = localStorage.getItem("sidebarState");

        // Determine initial state
        if (savedState === "closed") {
            sidebar.style.width = "0";
            main.style.marginLeft = "0";
            isSidebarOpen = false;
            isSidebarFullyOpen = false;
        } else {
            sidebar.style.width = maxWidth;
            main.style.marginLeft = maxWidth;
            isSidebarOpen = true;
            isSidebarFullyOpen = true;
        }

        // Disable transition for the initial state
        sidebar.style.transition = "none";
        main.style.transition = "none";

        // Re-enable transition for subsequent toggles
        setTimeout(() => {
            sidebar.style.transition = "width 0.5s";
            main.style.transition = "margin-left 0.5s";
        }, 10);
    }

    function toggleSubmenu(event) {
        const header = event.target.closest('#sidebar-header'); // Get the clicked header
        const submenu = header.nextElementSibling; // Get the submenu
        const toggleIcon = header.querySelector('.toggle-icon'); // Get the icon

        if (submenu && submenu.classList.contains('submenu')) {
            submenu.classList.toggle('open'); // Toggle the 'open' class to control visibility
            toggleIcon.textContent = submenu.classList.contains('open') ? '-' : '+'; // Update icon
        }
    }

    // Resolve sidebar links for local development
    // -------------------------------------------
    // This function will update the sidebar links when a page is loaded
    // locally so that sidebar naivagation remains functional without a server
    // Note: this solution is specific to MacOS
    document.addEventListener("DOMContentLoaded", function() {
        if (window.location.protocol === "file:") {
            // get the current local directory path
            const currentDir = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));

            // get 'absolute' links with root of 'website_redesign'
            const links = document.querySelectorAll("#mySidebar a");
            links.forEach(link => {
                const href = link.getAttribute("href");

                if (href && href.startsWith("/")) {
                    // extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // prepend root path to link
                    const resolvedHref = "file://" + rootPath + href;
                    link.setAttribute("href", resolvedHref);
                }
            });

            // Update image sources for icons
            const images = document.querySelectorAll(".social-icons img, .menu-icons img");
            images.forEach(img => {
                const src = img.getAttribute("src");

                if (src && src.startsWith("/")) {
                    // extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // prepend root path to image source
                    const resolvedSrc = "file://" + rootPath + src;
                    img.setAttribute("src", resolvedSrc);
                }
            });
        }
    });

    // Custom tooltips for the sidebar
    // -------------------------------
    // Flag to track tooltip visibility
    let isTooltipVisible = false;

    // Add text to the 'sidebar-tooltip' attribute for sidebar anchor tags
    document.querySelectorAll('.sidebar a').forEach(anchor => {
        const cleanedText = anchor.textContent.replace(/[+\-]/g, '').trim();
        anchor.setAttribute('sidebar-tooltip', cleanedText);
    });

    // Handle sidebar tooltips
    document.querySelectorAll('.sidebar a').forEach(function(link) {
        link.addEventListener('mouseenter', function(event) {
            const tooltipText = event.target.getAttribute('sidebar-tooltip');
            
            if (!tooltipText || isTooltipVisible || !isSidebarFullyOpen) return; // Only show tooltip if none is visible

            // Check if the text is overflowing
            if (event.target.scrollWidth > event.target.offsetWidth) {
                const delay = 500; // Set the delay time (in ms), adjust as needed

                // Create the tooltip after the delay
                setTimeout(function() {
                    // Remove any existing tooltips
                    const existingTooltip = document.querySelector('.sidebar-tooltip');
                    if (existingTooltip) {
                        existingTooltip.remove();
                    }

                    // Create the tooltip element dynamically
                    const tooltip = document.createElement('div');
                    tooltip.classList.add('sidebar-tooltip');  // Use the existing class
                    tooltip.innerText = tooltipText;

                    // Append the tooltip to the sidebar container
                    const sidebarContainer = document.querySelector('.sidebar');
                    sidebarContainer.appendChild(tooltip);

                    // Get the position of the link and the sidebar container
                    const rect = event.target.getBoundingClientRect();
                    const sidebarRect = sidebarContainer.getBoundingClientRect();

                    // Position the tooltip relative to the sidebar container
                    tooltip.style.position = 'absolute';
                    tooltip.style.left = `${rect.left - sidebarRect.left + sidebarContainer.scrollLeft + 20}px`;
                    tooltip.style.top = `${rect.bottom - sidebarRect.top + sidebarContainer.scrollTop + 5}px`;

                    // Make sure the tooltip is visible
                    tooltip.style.opacity = '1';

                    // Set the flag to true indicating that the tooltip is visible
                    isTooltipVisible = true;
                }, delay); // Delay the tooltip creation
            }
        });

        link.addEventListener('mouseleave', function(event) {
            // Remove the tooltip when the mouse leaves
            const tooltip = document.querySelector('.sidebar-tooltip');
            if (tooltip) {
                tooltip.remove();
            }

            // Reset the flag to false when the tooltip is removed
            isTooltipVisible = false;
        });
    });

    // Close all open submenus in the sidebar
    // --------------------------------------
    document.addEventListener("DOMContentLoaded", function() {
        // Function to close all open submenus in the navbar
        function closeAllSubmenus() {
            const allSubmenus = document.querySelectorAll('.submenu.open'); // Select all open submenus
            allSubmenus.forEach(submenu => {
                submenu.classList.remove('open'); // Remove 'open' class to collapse
                const toggleIcon = submenu.previousElementSibling.querySelector('.toggle-icon');
                if (toggleIcon) {
                    toggleIcon.textContent = '+'; // Reset icon to '+'
                }
            });
        }

        // Add functionality to collapse button (SVG icon)
        const collapseIcon = document.querySelector('.collapse-icon');
        if (collapseIcon) {
            collapseIcon.addEventListener('click', function(event) {
                event.stopPropagation(); // Prevent event propagation to avoid unwanted behavior
                closeAllSubmenus(); // Close all open submenus when the icon is clicked
            });
        }
    });

    // Keep the current page open in the sidebar
    // -----------------------------------------
    document.addEventListener("DOMContentLoaded", function () {
        // Get the full path relative to the 'content' folder
        const currentPage = window.location.pathname.split("/content/")[1].split("?")[0];

        // Find the active link using the full path
        const activeLink = document.querySelector(`#mySidebar a[href$='${currentPage}']`);

        if (activeLink) {
            // Apply the active class
            activeLink.classList.add("active");
             // Find the closest submenu
            const submenu = activeLink.closest('.submenu');

            if (submenu) {
                // Keep the submenu open
                submenu.classList.add('open');
                const toggleIcon = submenu.previousElementSibling.querySelector('.toggle-icon');

                if (toggleIcon) {
                    // Ensure the toggle icon reflects the open state
                    toggleIcon.textContent = '-';
                }
            }
        }
    });

    // ------------------------------
    // Font size buttons and dropdown
    // ------------------------------
    document.addEventListener("DOMContentLoaded", function() {
        const content = document.getElementById("content");

        // Retrieve and apply the saved font size
        const savedFontSize = localStorage.getItem("fontSize");
        if (savedFontSize && content) {
            content.style.fontSize = savedFontSize + "px";
        }
    });

    function increaseFontSize() {
        event.stopPropagation();  // Prevent dropdown from closing
        const content = document.getElementById("content");
        const currentSize = parseFloat(window.getComputedStyle(content).fontSize);
        const newSize = currentSize + 1;

        content.style.fontSize = newSize + "px";

        // save font size to localStorage
        localStorage.setItem("fontSize", newSize);
    }

    function decreaseFontSize() {
        event.stopPropagation();  // Prevent dropdown from closing
        const content = document.getElementById("content");
        const currentSize = parseFloat(window.getComputedStyle(content).fontSize);
        const newSize = currentSize - 1;

        content.style.fontSize = newSize + "px";

        // save font size to localStorage
        localStorage.setItem("fontSize", newSize);
    }

    // Dropdown for font buttons
    function toggleDropdown() {
        const dropdownContent = document.querySelector('.dropdown-content');
        dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
    }

    // Open/close dropdown on click of the button
    document.getElementById('dropdownButton').onclick = function(event) {
        event.stopPropagation();  // Prevent the click from triggering the window.onclick event
        toggleDropdown();
    };

    // Close dropdown if clicking outside
    window.onclick = function(event) {
        const dropdownContent = document.querySelector('.dropdown-content');
        if (!event.target.closest('.dropdown')) {  // Close if click outside the dropdown
            dropdownContent.style.display = 'none';
        }
    };

    // ----------------------------------------
    // Toggle between light and dark themes
    // ----------------------------------------
    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', () => {
        const themeToggle = document.querySelector('.theme-toggle');
        const sidebar = document.querySelector('.sidebar');
        const sunSVG = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
            </svg>
        `;
        const moonSVG = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                <path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
            </svg>
        `;

        // Check the saved theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.body.classList.toggle('dark-mode', savedTheme === 'dark');
            themeToggle.innerHTML = savedTheme === 'dark' ? moonSVG : sunSVG;
            sidebar.classList.toggle('dark-mode', savedTheme === 'dark');
        } else {
            // Default to light theme if no saved preference
            themeToggle.innerHTML = sunSVG;
        }

        // Add click event to toggle theme
        themeToggle.addEventListener('click', () => {
            const isDarkMode = document.body.classList.toggle('dark-mode');
            themeToggle.innerHTML = isDarkMode ? moonSVG : sunSVG;
            sidebar.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        });
    });

    // ----------------------------------------
    // Add a clickable '#' for each heading 
    // that directs to that heading
    // ----------------------------------------
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(header => {
            if (!header.id) {
                let text = header.textContent.trim().toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]/g, '');
                header.id = text;
            }

            // Avoid adding duplicate links if the script runs multiple times
            if (!header.querySelector(".headerlink")) {
                let link = document.createElement("a");
                link.className = "headerlink";
                link.href = `#${header.id}`;
                link.title = "Link to this heading";
                link.textContent = " #"; // Space before # for spacing

                header.appendChild(link);
            }
        });
    });

</script>

<!------------------------ #
# Code syntax highlighting #
# ------------------------->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />

<script>
    // Remove the leading whitespace/newlines around code blocks 
    // caused by the html structure used for readability
    document.addEventListener("DOMContentLoaded", function() {
        // Select all code blocks
        const codeBlocks = document.querySelectorAll('.code-cell code.language-python');

        codeBlocks.forEach(function(block) {
            // Apply syntax highlighting to the code block
            // Note: The below line is not needed with this setup
            //  but may be useful in the case that the method
            //  is later changed
            // Prism.highlightElement(block);

            // Get the code with highlighted classes
            const highlightedHTML = block.innerHTML;

            // Remove leading/trailing whitespace/newlines
            block.innerHTML = highlightedHTML.trim();
        });

        // Select all output-code blocks
        const outputBlocks = document.querySelectorAll('.output-cell .output-code');

        outputBlocks.forEach(function(block) {
            // Remove unwanted leading/trailing whitespace or newlines
            block.textContent = block.textContent.trim();
        });
    });

</script>

</body>
</html>